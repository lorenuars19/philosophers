use dat_set_state in fork_take
